<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Despre Lightning Network | Hackmajoris&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hackmajoris.github.io/img/IMG_6991-removebg-preview.png"><meta data-rh="true" name="twitter:image" content="https://hackmajoris.github.io/img/IMG_6991-removebg-preview.png"><meta data-rh="true" property="og:url" content="https://hackmajoris.github.io/2018/01/29/despre-lightning-network"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Despre Lightning Network | Hackmajoris&#x27;s blog"><meta data-rh="true" name="description" content="Articol tradus. Sursa originală"><meta data-rh="true" property="og:description" content="Articol tradus. Sursa originală"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2018-01-29T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hackmajoris.github.io/2018/01/29/despre-lightning-network"><link data-rh="true" rel="alternate" href="https://hackmajoris.github.io/2018/01/29/despre-lightning-network" hreflang="en"><link data-rh="true" rel="alternate" href="https://hackmajoris.github.io/2018/01/29/despre-lightning-network" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Hackmajoris&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Hackmajoris&#39;s blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.2f1cef36.css">
<link rel="preload" href="/assets/js/runtime~main.c31c9dc8.js" as="script">
<link rel="preload" href="/assets/js/main.5fb53c2d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/IMG_6991-removebg-preview.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/IMG_6991-removebg-preview.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Hackmajoris&#x27;s notes</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/06/17/developer-enemy">The enemy of developer</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/03/11/dispariția-băncii">Dispariția băncii Silicon Valley</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/01/23/rds-start-stop-scheduler">Amazon RDS Start-Stop Scheduler with CDK and TypeScript</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/21/enjoy-the-process">Enjoy the process</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/A Java DTO mapping example ☕️">A Java DTO mapping example ☕️</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/04/20/vpn-personal-in-3-minute">VPN Personal în 3 minute 😱</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/2018/01/29/despre-lightning-network">Despre Lightning Network</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/01/11/macbook-upgrade-first-impresions">Macbook Upgrade. First Impressions</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Despre Lightning Network</h1><div class="container_mt6G margin-vert--md"><time datetime="2018-01-29T00:00:00.000Z" itemprop="datePublished">January 29, 2018</time> · <!-- -->20 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Alexandru Ilies</span></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Articol tradus. Sursa <a href="https://medium.com/@x0100/%EF%B8%8Flightning-network-7c618c9cd68" target="_blank" rel="noopener noreferrer">originală</a></p><p>Lighting Network = LN</p><p>În partea 0 vom vedea, de ce este nevoie de așa ceva.
În partea 1 vom explica cum se desfășoară toate plățile în rețeaua Bitcoin, Lightning Network și problemele care se regăsesc. În partea 2 vom introduce componentele de bază din care e construit LN. În partea 3, în sfârșit vom descrie în detaliu cum sunt procesate plățile în protocolul LN. În a 4 parte, în mod rapid vom vorbi despre criticile care se regăsesc și comisionale existente. În partea 5, vom face un mic sumar.</p><p>!În mod conștient renunț/simplific unele momente tehnice. Încă nu sunt expert și pot să mă înșel în unele afirmări.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="0-de-ce">0. De ce?<a href="#0-de-ce" class="hash-link" aria-label="Direct link to 0. De ce?" title="Direct link to 0. De ce?">​</a></h2><p><strong>Bitcoin Blockchain</strong> - are la bază o bază date descentralizată, în care se salvează toate tranzacțiile din rețeaua Bitcoin. Pâna aici, ”toate tranzacțiile” este o parte destul de fundamentală la acest protocol. Ca întreg sistem să fie întradevăr descentralizat, și totodată funcționeze fără vreo oarecare eroare, trebuie, ca toate miile de noduri din rețea să re-verifice și să salveze toate tranzacțiile. Acest lucru, în mod clar, nu duce la o scalare: Blockchain ocupă zeci de Gigabytes pe disk, minerii folosesc mai mult curent decât are nevoie unele țări, blocurile sunt suprasolicitate, comisioanele cresc, oamenii înjură și fac fork la Bitcoin. Din aceaste cauze, la moment, în mod activ se construiesc soluții alternative. Una dintre aceste soluții este Lightning Network.</p><blockquote><p lang="en" dir="ltr">Q: When will the Lightning Network be rolled out? A: The rollout has already begun. This is an iterative distributed learning process; it&#x27;s unlikely there will be a single point in time at which we say LN is &quot;deployed&quot; because it will grow organically. Software is never finished.</p>— Jameson Lopp (@lopp) <a href="https://twitter.com/lopp/status/947808940255006726?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">January 1, 2018</a></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-ideea">1. Ideea<a href="#1-ideea" class="hash-link" aria-label="Direct link to 1. Ideea" title="Direct link to 1. Ideea">​</a></h3><p>Idea de soluționare a problemei de la nivelului doi (second layer solution), la care se referă LN, sună foarte simplu:</p><blockquote>În loc să se salveze și să se verifice toate tranzacțiile în Blokchain, vom realiza o mare parte din plăți în afara rețelei Blockchain, iar în Blockchain vom sincroniza din timp în timp balanțele și vom rezolva conflictele. De funționat toate acestea vor funcționa, ca deobicei cu ajutorul criptomagiei.</blockquote><p>Sună bine, însă nu știm cum toate acestea funcționează.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-canalul-de-plată">1.1. Canalul de plată<a href="#11-canalul-de-plată" class="hash-link" aria-label="Direct link to 1.1. Canalul de plată" title="Direct link to 1.1. Canalul de plată">​</a></h3><p>Să începem prin a simplifica viața a două persoane, Alisa și Bob, care foarte des se plătesc între ei. Se oferă următoarea schema:</p><ol><li>Alisa și Bob trimit depozituri la adresa o adresă comună care se administrează cu ajutorul a două chei private.</li><li>Fiecare din ei, crează o tranzacție specială - Smart Contract(da, Bitcoin dispune de Smart-Contracts, despre asta în partea următoare). Această tranzacție este corectă, dar încă nu este scrisă în Blochain.</li><li>De la început, tranzacția conține informație conform căreia, Alisa și Bob pot lua înapoi depozitele lor.</li><li>Cand Alisa se achită cu Bob, printr-o înțelegere comună -updatează informația din aceste tranzacții. Alisa acceptă să primească mai puțină valoare din propriul depozit, iar Bob - mai multă. Defapt, aceste tranzacții reprezintă niste obligațiuni(IOU, I owe you)</li><li>În așa mod, ei pot schimba între ei sume nu foarte mari(în limitele depozitelor lor), măcar până la nesfârșit.</li><li>La un anumit moment, oricare din părți, poate să ceară să se achite pentru totdeauna. Atunci Lisa(sau Bob) pur și simplu înscriu tranzacția finală în Blockchain-ul principal și primesc suma depozitului împreună cu suma provenită din plățile care au fost făcute către acest depozit. </li></ol><p>Punctele 1-3 din această schemă se numesc deschiderea canalului de plătă/plăți(payment channel). Punctele 4 și 5 - folosirea canalului. Punctul 6 - închiderea canalului de plată/plăți.</p><blockquote>👍 În blockchain se înscriu doar două tranzacții: tranzacția de depozitare, în care are loc deschiderea canalului de plată și tranzacția finală(închiderea canalului). Toate tranzacțiile interemediare dintre aceste două tranzacții nu se folosesc de Blockchain și nu sunt salvate în acesta, de aceea acestea sunt făcute fără nici un cost(comision) și sunt momentane.</blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-rețeaua-de-canale-de-plată">1.2. Rețeaua de canale de plată<a href="#12-rețeaua-de-canale-de-plată" class="hash-link" aria-label="Direct link to 1.2. Rețeaua de canale de plată" title="Direct link to 1.2. Rețeaua de canale de plată">​</a></h3><p>Canalele de plăți între două persoane - nu este ceva foarte util. La urma urmei, cu marea majoritate a oamenilor noi nu facem tranzacții regulare. Dar...</p><blockquote>💡 Cand canalele de plată formează o rețea, se ivește posibilitatea de a face plăți între fiecare utilizator al rețelei, către care există o legătură în graful acestei rețele(chiar dacă ei nu au legătură directă unul cu altul). Aceasta și este ideea de bază a Lighting Network.</blockquote><p>Așa arată graful canalelor de plată, în momentul 22.01.2018: (<a href="https://lnmainnet.gaben.win" target="_blank" rel="noopener noreferrer">https://lnmainnet.gaben.win</a>).
<img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/1*vYgP4rEOttWssox5l-LGig.png" class="img_ev3q"></p><p>În principiu, analog protocolului TCP, unui om simplu îi este îndeajuns să aibă doar un singur canal deschis, ca acesta să poată să utilizeze tranzacții cu oricine. Desigur, este nevoie să se caute și segmentul cel mai optim între doi utilizatori, și mai trebuie cumva să se motiveze participanții rețelei ca aceștia să verifice tranzacțiile străine. Dar, sa începem cu problema de bază: problema încrederii.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-problema-încrederii">1.3. Problema încrederii<a href="#13-problema-încrederii" class="hash-link" aria-label="Direct link to 1.3. Problema încrederii" title="Direct link to 1.3. Problema încrederii">​</a></h3><p>Cum se întâmplă des în criptografie, sistema canalelor de plată este foarte simplu de imaginat, dacă toate parțile au încredere între ele. Nu este nevoie să îngrădim grădina cu depozite, chei private, tranzacții speciale. Se poate simplu de scris doar cui și cu cât este cineva dator.
Următorul lucru de înțeles: cum putem realiza un canal de plăți fără a avea încredere între parți?
Problemele de bază for fi trei.</p><ol><li>Ambele depozite, ale Alisei și Bob se află întrun portofel virtual comun. Dacă Bob nu va fi deacord să semneze tranzacția, cum Alisa își va întoarce depozitul ei?</li><li>În procesul de calculare, sunt create multiple versiuni ale oblicațiunilor. Să presupunem că, practic, Alisa îl plătește pe Bob. Atunci, în versiunea finală a tranzacției, Bob va primi un depozit mai mare decât depozitul lui inițial iar Alisa - mai puțin. Dar Alisa poate înșela și poate înscrie singură în Blockchain prima versiune validă a tranzacției, ca și cum Bob niciodată nu a primit bani. Cu ce va rămâne Bob?</li><li>Dacă Alisa și Bob, transferă banii prin rețea folosind o a treia persoană - Victor, atunci cum ei pot fi siguri că Victor întradevăr va transmite banii și nu îi va lua lui?</li></ol><p>Să numim aceste probleme corespunzător: </p><ul><li>problema depozitului comun</li><li>problema ultimei tranzacții</li><li>problema persoanei terțe</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-smart-contractszaqwa-p0o9azza">2. Smart-contractsz<code>~~aqwa</code>=-[p0o9az`~ZA;./&quot;|<a href="#2-smart-contractszaqwa-p0o9azza" class="hash-link" aria-label="Direct link to 2-smart-contractszaqwa-p0o9azza" title="Direct link to 2-smart-contractszaqwa-p0o9azza">​</a></h2><blockquote><p>≤
Bitcoin are suport pentru un limbaj simplu al smart-contractelor - Script. În fiecare tranzacție Bitcoin există un câmp special, care conține un script scris în acest limbaj. Acest script verifică, după aplicarea a căror reguli, ieșirea tranzacției poate fi folosită.
”Folosirea ieșirei tranzacției A” - este un mod mult mai corect tehnic spus ”folosirea banilor din adresa/portofelul K, unde aceștia au fost depuși cu ajutorul tranzacției A”</p></blockquote><blockquote>☝ În comparație, de exemplu, cu Ethereum, posibilitățile smart-contractelor Bitcoin sunt cu mult mai limitate. Este legat acest lucru de Script, și anume că acesta nu este destul pentru Turing. De exemplu, în acesta nu se poate folosi cicluri/recursivitate și nu se poate crea variabile(lipsa memoriei).</blockquote><p>Să vedem cele mai importante operații ale acestui limbaj.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-autorizația">2.1 Autorizația<a href="#21-autorizația" class="hash-link" aria-label="Direct link to 2.1 Autorizația" title="Direct link to 2.1 Autorizația">​</a></h3><p>Probail, partea cea mai standard a oricărei tranzacții - este verificarea semnăturii. Să presupunem că tranzacția A, transferă resurse la o oarecare adresă K. Ca să fie cheltuite resursele din K, trebuie să se demonstreze deținerea cheii(cheia privată). De acest lucru răspunde operația <strong>OP_CheckSig</strong>. Dar, după dorință, se poate verifica și ceva adaugător. De exemplu, se poate verifica, că persoana deține un număr secret, iar hash-ul este egal cu acel număr. Pentru aceasta, este nevoie de două operațiuni: <strong>OP_SHA256</strong>(citește hash-ul) și <strong>OP_EqualVerify</strong>(verifică egalitatea). De ce avem nevoie de toate acestea, va fi clar în partea 4.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-cooperarea">2.2. Cooperarea<a href="#22-cooperarea" class="hash-link" aria-label="Direct link to 2.2. Cooperarea" title="Direct link to 2.2. Cooperarea">​</a></h3><p>Un alt exemplu simplu de smart-contract la Bitcoin se bazează pe operația <strong>OP_CheckMultiSig</strong>. Aceasta permite să se folosească resursele doar prin semnarea câtorva chei predefinite. Pe acest principiu funționează așa spusele ”multiple signature wallets”. La fel ca și celula unei bănci, care este încuiată cu două chei, una aflându-se la angajatorul băncii iar alta la client.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-perioadele">2.3. Perioadele<a href="#23-perioadele" class="hash-link" aria-label="Direct link to 2.3. Perioadele" title="Direct link to 2.3. Perioadele">​</a></h3><p>Bitcoin are suport și pentru operația <strong>OP_CheckSequesnceVerify</strong>, care permite folosirea resurselor doar peste un număr fix de blocuri. De exemplu, aceasta permite educarea oamenilor, care nu pot salva resursele. Blockchain este mai eficient decât oricare cont de economii: dacă utilizatorul a decis să înghețe suma acumulată pe o anumită perioadă, această sumă va fi înghețată garantat. Dar, pe lângă acest scenariu, <strong>OP_CheckSequenceVerify</strong>, și alte componente, în mod activ se folosesc pentru realizarea canalelor de plăți.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-realizarea-canalului">3. Realizarea canalului<a href="#3-realizarea-canalului" class="hash-link" aria-label="Direct link to 3. Realizarea canalului" title="Direct link to 3. Realizarea canalului">​</a></h2><p>Acum, când toate blocurile de control sunt la locul lor, se poate descrie unele detalii ale funcționării canalului de plată.  Defapt, unele imaginări ale canalului de plăți, au fost descrise încă de Satoshi. Eu ma voi axa mai mult pe specificația, care se numește Poon-Dryja payment channels(după părerea autorilor principali Lightning Network).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-deschiderea-canalului">3.1. Deschiderea canalului<a href="#31-deschiderea-canalului" class="hash-link" aria-label="Direct link to 3.1. Deschiderea canalului" title="Direct link to 3.1. Deschiderea canalului">​</a></h3><ol><li>Alisa și Bob crează tranzacții, care depun resursele într-o adresă de depozit comun. Să presupunem că X bitcoins se transferă din portofelul Alisei, și Y - din portofelul lui Bob. Resursele din depozitul comun pot fi folosite doar prin semnarea împreună a cheilor private ale Alisei și Bob. (OP_CheckMultiSig). </li><li>Primul truc, se evidențiază prin aceea că ei încă NU semnează și NU transmit tranzacția în Blockchain(dealtfel, Bob o poate minți pe Lisa și poate să-i înghețe rezursele pe veșnicie).)</li><li>În loc de acestea, Alisa și Bob crează două noi tranzacții de retur a depozitului initial. Intrarea acestor tranzacții sunt resursele din depozitul comun(ieșirea tranzacției 0). Ieșiri ale tranzacțiilor sunt două: X se duce înapoi la adresa Alisei, Y - la adresa lui Bob. În realitate, toate acestea sunt un pic mai dificile, dar despre asta, un pic mai târziu.</li><li>Mai departe, Bob, semnează tranzacția A1 și o transmite către Alisa. Alisa semnează tranzacția B1 și o trimite lui Bob.</li><li>În acest moment, tranzacția de depunere a depozitului, se poate înscrie în Blockchain, nimeni nu minte. Dacă Bob va fi deacord să coopereze, Alisa oricând poate semna tranzacția A1, să o înscrie în Blockchain și să obțină depozitul acesteia înapoi.</li></ol><p>În acest moment ”problema depozitului comun” este rezolvată. Deschiderea canalului de plată poate ave loc fără a avea încredere în cealaltă persoană.</p><blockquote>☝ Un fapt interesant. Încă cu jumătate de an în urmă(înainte de a se introduce SegWit) semnarea tranzacțiilor neconfirmate(punctul 4) avea loc mult mai greu, din cauza problemei maleabilitatății(transaction malleability)</blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-folosirea-canalului">3.2 Folosirea canalului<a href="#32-folosirea-canalului" class="hash-link" aria-label="Direct link to 3.2 Folosirea canalului" title="Direct link to 3.2 Folosirea canalului">​</a></h3><p>Plățile din interiourul canalului se realizează defapt prin re-rescrierea tranzacției A1 și B1 în noi tranzacții.</p><ol><li>Alisa îl plătește pe Bob pentru o cafea, care costă C.</li><li>Tot Alisa, este deacord că, la închiderea canalului de plată ea va lua înapoi, nu suma depusa la început X, ci X&#x27; = (X - C).</li><li>Iar Bob: Y&#x27; = (Y + C).</li></ol><p>Deasemenea, noile tranzacții A2 și B2 vor arăta la fel ca A1 și B1, doar că cu sume noi. Fiecare din părți, poate în orice moment să închidă canalul de plată, scriind ultima versiune a tranzacției în Blockchain.</p><p>Cum ne asigurăm că Alisa nu va scrie în Blockchain tranzacția A1  în loc de tranzacția A2? Pentru aceasta, exista încă un truc.</p><ol><li>De fiecare dată când Alisa și Bob crează noi tranzacții, ei aleg o cheie privată de unică folosință, de care au nevoie ca să poată lua depozitul înapoi(OP_CheckSig).</li><li>La fiecare plată i, Alisa îi va arăta lui Bob cheia privată precedentă AK(i-1), și va crea o nouă cheie AKi pentru noua tranzacție. Bob nu va accepta plata făra cheia anterioară.</li><li>Dacă Bob știe cheia, atunci acesta poate cheltui toți banii Alisei, doar dacă Alisa va decide să înscrie tranzacția greșită în Blockchain.</li><li>În așa fel, Alisa întodeauna este interesată de a înscrie în Blockchain tranzacția corectă, adică utlima.</li></ol><p><em>Modificare minoră</em>
Pentru ca Bob să aibă posibilitatea să dispute tranzacția cu Alisa și să obțină cheia acesteia, Bob are nevoie de timp. De aceea, Alisa, va obține depozitul ei nu în același timp, dar după câteva blocuri T(OP_CheckSequenceVerify). De exemplu, peste 48 blocuri, adică peste 8 ore.</p><p>Dacă Alisa semnează una din tranzacțiile ei(ele sunt semnate deja de Bob), și transmite această tranzacție în Blockchain, atunci pot avea loc două scenarii.</p><ol><li>Alisa emite tranzacția finală =&gt; Bob nu cunoaște utlima cheie a Alisei Aki. Aceasta este o închidere corectă a canalului, toți trebuie să primească banii lor înapoi. Alisa îi va primi peste ceva timp.</li><li>Alisa încearcă să semneze tranzacția veche în loc de cea nouă, finală =&gt; Alisa încearcă să-l mintă pe Bob. În acest caz, Bob cunoaște cheia lui Alisa și acesta poate să o folosească pentru a primi toată suma Alisei. Este clar că, Alisa nu este interesată în acest scenariu.</li></ol><p>Așadar, ”problema ultimei tranzacții” este la fel - rezolvată și canalul de comunicare între două persoane este în regulă. Acum, deasemenea, devin evidente câteva avantaje și neajunsuri.</p><p>👍 <strong>Avanteje:</strong></p><ol><li>Plățile din interiorul canalului sunt instante și gratis, ele nu duc la solicitarea Blockchain-ului principal. </li><li>Părțile nu sunt obligate să aibă încredere una în alta.</li></ol><p>👎 <strong>Neajunsuri</strong></p><ol><li>Depozitele sunt blocate pe toată perioada existenții canalului.</li><li>Fiecare dintre părți, trebuie periodic să se ivească online(cel puțin o dată-n T)</li></ol><p>👌 În realitate, ambele neajunsuri sunt necesare pentru canalele de plăți între două persoane, dar nu prea sunt importante pentru LN. Primul neajuns încetează să mai fie neajuns dacă un canal de plăți poate fi folosit pentru tranzacții cu alte persoane.
Al doilea neajuns lipsește în LN, așa cum verificarea corectitudinei poate fi făcută de oricare utilizator al rețelei( dacă Vasile va observa țeapa Alisei, atunci acesta va împărți cu Bob valoarea confiscată.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-lightning-network">4. Lightning Network<a href="#4-lightning-network" class="hash-link" aria-label="Direct link to 4. Lightning Network" title="Direct link to 4. Lightning Network">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-canalul-de-plăți-printr-o-persoană-terță">4.1. Canalul de plăți printr-o persoană terță<a href="#41-canalul-de-plăți-printr-o-persoană-terță" class="hash-link" aria-label="Direct link to 4.1. Canalul de plăți printr-o persoană terță" title="Direct link to 4.1. Canalul de plăți printr-o persoană terță">​</a></h3><p>Să presupunem acum că Alisa și Bob nu au un canal deschis între ei, dar ei, ambii au un canal deschis cu Victor. Alisa poate fără probleme să trimită bani lui Victor, iar Victor fără probleme poate trimite banii lui Bob.
Dar, cum să fim siguri, că Victor, obținând banii, întradevăr îi va trimite mai departe lui Bob?</p><p>În realitate, ideea este foarte similară cu trucul anterior, doar că în loc de cheile de unică folosință se folosește un oarecare număr secret.</p><ol><li>Bob generează un număr secret S, hash-ul al acestei chei HS și transmite această informație Alisei. HS în acest caz poate fi folosit ca un bon de plată virtual.</li><li>Alisa crează tranzacția AV, care transmite banii lui Victor, numai în cazul în care Victor va oferi numărul secret S. Pentru aceasta, Alisa folosește un script, care verifică egalitatea hash-ului oferit de numărul și valoarea HS(aici se folosește operația OP_SHA256 și OP_EqualVerify).</li><li>Victor crează o tranzacție analog VB, care transmite banii lui Bob, doar în cazul în care Bob va prezenta numărul secret.</li><li>Bob vede că poate primi bani de la Victor, și îi arată acestuia numărul secret S. Acum, Victor poate demonstra că acesta a transmis banii lui Bob.</li></ol><p>Aici sunt câteva variante în care scenariile pot avea loc:</p><ol><li>Înainte de toate, Victor nu are nici un sens să o mintă pe Alisa. El nu poate să nu transmită banii lui Bob, deoarece, dealtfel, Victor oricum nu va primi bani de la Alisa.</li><li>Însă Bob, poate să decidă să-l mintă pe Victor și să nu-i dea acestuia numărul secret. Pe lângă asta, el poate închide canalul cu Victor și să înscrie în blockchain tranzacția VB. Însă, pentru primirea banilor, el oricum este nevoit să arate  numărul lui secret, și aici - Victor îl va recunoaște.</li></ol><p>Aici există câteva nuanțe, legate de timpul în care Alisa, Bob și Victor pot rezolva conflictele. Dar, aceasta este o temă mult prea tehnică. Dacă sunteți interesați - Google it (Time-Locked Contracts or HTLCs).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-rutarea">4.2. Rutarea<a href="#42-rutarea" class="hash-link" aria-label="Direct link to 4.2. Rutarea" title="Direct link to 4.2. Rutarea">​</a></h2><p>În practică, Alisa și Bob pot fi legați între ei nu prin cunoscutul lor comun - Victor, ci prin câțiva necunoscuți intermediari din întreaga lume. Problema căutării celui mai scurt drum în graf, în rețea, se numește problema rutării.</p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/1*933GpxVj8PzBVPMQGbDeng.png" class="img_ev3q">
(Împărțirea geografică a nodurilor în rețeaua de test)
Photo by: <a href="https://explorer.acinq.co/#/" target="_blank" rel="noopener noreferrer">https://explorer.acinq.co/#/</a>)</p><p>Problema rutării, în realitate este o ramură în care se fac cercetări active în acest moment. Alegerea drumului optim în graf depinde de mai mulți factori dinamici: numărul de noduri, topologia rețelei, capacitatea canalului de plăți, comisia nodurilor intermediare.</p><p>Ca să nu intrăm în detalii, căutarea drumului și transmiterea plăților în LN se realizează pe baza Onion Routing - tehnologia raspândirii informației în mod anonim, în rețelele peer-to-peer.  În acest fel, de exemplu, funcționează Tor.</p><p>Totul este descentralizat, tot traficul este criptat. Nimeni nu știe de la cine și către cine, vin și se duc banii. De aici, încă un avantaj.</p><p>👍 <strong>Avantaj</strong>:
Rețeaua LN este cu mult mai anonimă, decât însăși el - Bitcoin.
În primul rând, persoanele care fac plăți între ei, sunt văzute doar de câțiva membri ai rețelei. În al doilea rând, chiar și între membrii rețelei, doar primul și ultimul știe exact, de la cine și către cine vin și se transmit banii.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-comisioanele">4.3. Comisioanele<a href="#43-comisioanele" class="hash-link" aria-label="Direct link to 4.3. Comisioanele" title="Direct link to 4.3. Comisioanele">​</a></h3><p>Rămân două întrebări evidente.</p><p><strong>Întrebare numărul 1:</strong> De ce intermediarii trebuie să verifice tranzacții străine?
În primul rând deoarece ei însuși vor folosi mai ușor LN. În al doilea rând, deoarece ei vor primi din toată asta un comision foarte mic, dar totuși comision. În acest moment, rețeaua este întreținută în mare parte de entuziaști iar comisionul este aproape 0: 1 satoshi, sau 0.01 cent pentru fiecare intermediar.</p><p>👍 Capacitatea canalelor - nu este o resursă mai scumpă decât mărimea blocului. Deschiderea canelelor se face ușor și necostisitor. De aceea comisioanele în LN sunt cu mult mai mici decât comisioanele din Blockchain.</p><p><strong>Întrebarea numărul 2:</strong> Cum e cu comisionul la deschiderea/închiderea canalului?</p><p>Întradevăr, acest comision poate fi uneori și zeci de dolari. În acest fel, plățile vor fi mai profitabile dacă se vor deschide/închide canale mai puține. Aceasta motivează oamenii să deschidă canale cu depozite mari, și să folosească canalele în două direcții: nu doar pentru plățile care pleacă ci și pentru cele care vin. De exemplu: eu deschid un canal, fac o depunere de 1000$, și folosesc canalul dat doar pentru plățile de ieșire. Valoarea canalului va fi de 1000 dolari, din care undeva 20 de doloari se vor plăti pentru deschiderea/închiderea canalului. Adică, comisia totală va fi de 2%. Un pic mai bine decât cum e la Visa și Mastercard, dar evident mai mult decât aș fi dorit. Situația se schimbă drastic când eu încep să folosesc Lightning la maxim: făcând depozite mai mari și primind bani prin intermediul canalelor, ci nu doar cheltuindu-i. Atunci, depinzând de proporția intrare/ieșire a banilor, canalul poate fi deschis la infinit și comisioanele vor tinde spre zero.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-critici">4.4. Critici<a href="#44-critici" class="hash-link" aria-label="Direct link to 4.4. Critici" title="Direct link to 4.4. Critici">​</a></h3><p>Pe internet se poate găsi o mulțime de critici legate de soluția    layer-ului 2 și de Lighting Network în general. Careva puncte întradevăr merită atenție, multe - trebuie deja uitate. Câteva exemple:</p><ol><li><strong>Folosirea LN va duce la centralizare: utilizatorii vor fi motivați să se conecteze la hub-uri mari iar aceste hub-uri vor controla tot traficul.</strong></li></ol><p>Un asemenea risc există, dar acesta este foarte mic. În primul rând, e foarte economic și foarte simplu de realizat un nou nod care va respinge hub-urile mari. În al doilea rând, algoritmii de rutare urmăresc balansarea traficului. În al treilea rând, la acest moment, asemenea problemă nu există.</p><ol start="2"><li><strong>Capacitatea mică a canaleleor va face ca LN să fie suprasolicită, comisioanele vor crește și cel mai probabil situația va fi la fel, ca și în Blockchainul de baza.</strong></li></ol><p>Încă o dată, îndată ce așa ceva se va întâmpla, persoanele vor fi motivate să deschidă noduri personale. În comparație cu mărimea blocului, numărul de noduri, este practic nelimitată.</p><ol start="3"><li><strong>O rutare efectivă la un număr mare de noduri peer-to-peer este imposibilă. Mai ales ținând cont de dificultatea deschiderii a noi canale.</strong></li></ol><p>Până la o asemenea problemă este foarte și foarte departe iar cercetările în acest domeniu în mod activ au loc chiar în acest moment. Cu siguranță se vor lua ceva măsuri.</p><ol start="4"><li><strong>Canele sunt nevoie mereu să fie deschise și închise, comisioanele folosite pentru așa ceva vor fi mari iar folosirea LN nu se va merita.</strong> </li></ol><p>Defapt, problema dată este deja din trecut, pe care, nu înțeleg de ce, încă o discută. Ceva timp în urmă, versiunile canalelor de plată întradevăr, erau doar într-o singură direcție, iar canalul putea să existe doar o perioadă scurtă de timp. Acum aceste probleme sunt rezolvate.</p><ol start="5"><li><strong>Pentru folosirea LN este nevoie să fii online.</strong></li></ol><p>În comparație cu versiunile anterioare ale LN, utilizatorul nu este nevoit să se afle tot timpul online: alte noduri din rețea  vor verifica că doi deținători ale canalului de plată nu încearcă să se mintă unul pe altul. În mod cert, trebuie să fii online doar pentru trimiterea și primirea plăților, care fără nici o îndoială este un neajuns, dar de această dată, mult mai neimportant.</p><ol start="6"><li><strong>LN - aceasta nu este sigur.</strong>
Plățile LN sunt un pic mai periculoase decât plățile făcute direct în Blockchain. Dar, doar întrun singur context: un atac cu succes de 51% asupra Blockchain-ului Bitcoin. Riscul dat este unul catastrofic de mic.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-ln-astăzi">5. LN astăzi<a href="#5-ln-astăzi" class="hash-link" aria-label="Direct link to 5. LN astăzi" title="Direct link to 5. LN astăzi">​</a></h2><p>Lucrul cel mai important pe care trebuie să-l cunoașteți:
<strong>Lighthing</strong> deja se folosește și funcționează în realiate.</p><p>Mai mult de o mie de noduri în rețeaua de testare bitcoin și mai mult de 200 de noduri(numărul crește în fiecare zi) în rețeaua de bază bitcoin(mainnet) deja verifică plăți.</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Anyone want to help bug test new <a href="https://twitter.com/Blockstream?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">@Blockstream</a> <a href="https://twitter.com/hashtag/LightningNetwork?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">#LightningNetwork</a> store? The Github repos should make it easy enough for even <a href="https://twitter.com/coinbase?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">@coinbase</a> &amp; <a href="https://twitter.com/BitPay?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">@BitPay</a> to integrate with the second layer. Cypherpunks do not whine they write code. Right <a href="https://twitter.com/adam3us?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">@adam3us</a>? <a href="https://twitter.com/hashtag/MYOTHERNODEISASATELLITE?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">#MYOTHERNODEISASATELLITE</a> <a href="https://twitter.com/hashtag/DONTTRUSTVERIFY?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">#DONTTRUSTVERIFY</a> <a href="https://t.co/Il3YBvirYo" target="_blank" rel="noopener noreferrer">pic.twitter.com/Il3YBvirYo</a></p>— Trace Mayer (@TraceMayer) <a href="https://twitter.com/TraceMayer/status/953430172019101696?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">January 17, 2018</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>Ce ține de softuri - există trei implementări de bază, lnt de la Lightning Labs, c-lightning de la Blockstream, eclair de la ACINQ.</p><p>Aceste echipe, nu doar de un an lucrează împreună, pentru a dezvolta un standard comun de interacțiune a nodurilor: Lighthing Network Specifications(BOLTs). Și uite că chiar la sfârșitul anului 2017, au testat protocolul de plăți, împreună, și toate cele trei implementări au fost cu succes. </p><p>Să achiți cu bitcoini reali folosind LN, se poate doar la câteva magazine online. Dar, asta e doar cu câteva magazine mai multe decât acum o lună, iar acesta deja este succes. </p><p>Desigur, momentul general de transfer de la on-chain bitcoin la plăți off-chain este încă foarte departe. O muncă imensă urmează să o facă dezvoltatorii de portofele virtuale, nodurile de plată, bursele, magazinele-online, și, nu în ultimul rând - utilizatorii. Cel mai interesant în această istorie este că tranzacții mult mai rapide, anonime și gratis - sunt doar începutul! Urmează o mai multă anonimitate, swap-uri atomice, schimburi distribuite și mult, mult mai mult.</p><p>Viitorul arată interesant!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2018/04/20/vpn-personal-in-3-minute"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">VPN Personal în 3 minute 😱</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2018/01/11/macbook-upgrade-first-impresions"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Macbook Upgrade. First Impressions</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0-de-ce" class="table-of-contents__link toc-highlight">0. De ce?</a><ul><li><a href="#1-ideea" class="table-of-contents__link toc-highlight">1. Ideea</a></li><li><a href="#11-canalul-de-plată" class="table-of-contents__link toc-highlight">1.1. Canalul de plată</a></li><li><a href="#12-rețeaua-de-canale-de-plată" class="table-of-contents__link toc-highlight">1.2. Rețeaua de canale de plată</a></li><li><a href="#13-problema-încrederii" class="table-of-contents__link toc-highlight">1.3. Problema încrederii</a></li></ul></li><li><a href="#2-smart-contractszaqwa-p0o9azza" class="table-of-contents__link toc-highlight">2. Smart-contractsz<code>~~aqwa</code>=-[p0o9az`~ZA;./&quot;|</a><ul><li><a href="#21-autorizația" class="table-of-contents__link toc-highlight">2.1 Autorizația</a></li><li><a href="#22-cooperarea" class="table-of-contents__link toc-highlight">2.2. Cooperarea</a></li><li><a href="#23-perioadele" class="table-of-contents__link toc-highlight">2.3. Perioadele</a></li></ul></li><li><a href="#3-realizarea-canalului" class="table-of-contents__link toc-highlight">3. Realizarea canalului</a><ul><li><a href="#31-deschiderea-canalului" class="table-of-contents__link toc-highlight">3.1. Deschiderea canalului</a></li><li><a href="#32-folosirea-canalului" class="table-of-contents__link toc-highlight">3.2 Folosirea canalului</a></li></ul></li><li><a href="#4-lightning-network" class="table-of-contents__link toc-highlight">4. Lightning Network</a><ul><li><a href="#41-canalul-de-plăți-printr-o-persoană-terță" class="table-of-contents__link toc-highlight">4.1. Canalul de plăți printr-o persoană terță</a></li></ul></li><li><a href="#42-rutarea" class="table-of-contents__link toc-highlight">4.2. Rutarea</a><ul><li><a href="#43-comisioanele" class="table-of-contents__link toc-highlight">4.3. Comisioanele</a></li><li><a href="#44-critici" class="table-of-contents__link toc-highlight">4.4. Critici</a></li></ul></li><li><a href="#5-ln-astăzi" class="table-of-contents__link toc-highlight">5. LN astăzi</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.c31c9dc8.js"></script>
<script src="/assets/js/main.5fb53c2d.js"></script>
</body>
</html>